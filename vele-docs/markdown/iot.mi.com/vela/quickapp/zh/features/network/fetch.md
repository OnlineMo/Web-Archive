::: {#app server-rendered="true"}
::: theme-container
::: navbar
::: sidebar-button
![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGFyaWEtaGlkZGVuPSJ0cnVlIiByb2xlPSJpbWciIHZpZXdib3g9IjAgMCA0NDggNTEyIiBjbGFzcz0iaWNvbiI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNDM2IDEyNEgxMmMtNi42MjcgMC0xMi01LjM3My0xMi0xMlY4MGMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6bTAgMTYwSDEyYy02LjYyNyAwLTEyLTUuMzczLTEyLTEydi0zMmMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6bTAgMTYwSDEyYy02LjYyNyAwLTEyLTUuMzczLTEyLTEydi0zMmMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6Ij48L3BhdGg+PC9zdmc+){.icon}
:::

[![Xiaomi Vela JS 应用](../../../logo.png){.logo} [Xiaomi Vela JS
应用]{.site-name
.can-hide}](https://iot.mi.com/vela/quickapp/){.home-link
.router-link-active}

::: links
::: search-box
:::

::: nav-item
[教程](../../guide/version/APILevel4.html){.nav-link}
:::

::: nav-item
[组件](../../components/index.html){.nav-link}
:::

::: nav-item
[JS接口](../index.html){.nav-link .router-link-active}
:::

::: nav-item
[编程示例](../../samples/index.html){.nav-link}
:::

::: nav-item
[工具](../../tools/index.html){.nav-link}
:::

::: nav-item
::: dropdown-wrapper
[选择语言]{.title} []{.arrow .down}

[选择语言]{.title} []{.arrow .right}

-   [简体中文](fetch.html){.nav-link .router-link-exact-active
    .router-link-active aria-current="page"}
-   [English](https://iot.mi.com/vela/quickapp/en/features/network/fetch.html){.nav-link}
:::
:::
:::
:::

::: sidebar-mask
:::

::: nav-item
[教程](../../guide/version/APILevel4.html){.nav-link}
:::

::: nav-item
[组件](../../components/index.html){.nav-link}
:::

::: nav-item
[JS接口](../index.html){.nav-link .router-link-active}
:::

::: nav-item
[编程示例](../../samples/index.html){.nav-link}
:::

::: nav-item
[工具](../../tools/index.html){.nav-link}
:::

::: nav-item
::: dropdown-wrapper
[选择语言]{.title} []{.arrow .down}

[选择语言]{.title} []{.arrow .right}

-   [简体中文](fetch.html){.nav-link .router-link-exact-active
    .router-link-active aria-current="page"}
-   [English](https://iot.mi.com/vela/quickapp/en/features/network/fetch.html){.nav-link}
:::
:::

-   [通用规范](../grammar.html){.sidebar-link}

-   ::: {.section .sidebar-group .depth-0}
    [基本功能](../basic/index.html){.sidebar-heading .clickable}
    -   [应用上下文 app](../basic/app.html){.sidebar-link}
    -   [设备信息 device](../basic/device.html){.sidebar-link}
    -   [页面路由 router](../basic/router.html){.sidebar-link}
    -   [应用配置
        configuration](../basic/configuration.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [网络访问](index.html){.sidebar-heading .clickable
    .router-link-active .open}
    -   [数据请求 fetch](fetch.html){.active .sidebar-link
        aria-current="page"}
    -   [设备通信 interconnect](interconnect.html){.sidebar-link}
    -   [下载 request](request.html){.sidebar-link}
    -   [上传 uploadtask](uploadtask.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [数据文件](../data/index.html){.sidebar-heading .clickable}
    -   [数据存储 storage](../data/storage.html){.sidebar-link}
    -   [文件存储 file](../data/file.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [系统能力](../system/index.html){.sidebar-heading .clickable}
    -   [网络信息 network](../system/network.html){.sidebar-link}
    -   [振动 vibrator](../system/vibrator.html){.sidebar-link}
    -   [屏幕亮度 brightness](../system/brightness.html){.sidebar-link}
    -   [录音 record](../system/record.html){.sidebar-link}
    -   [地理位置
        geolocation](../system/geolocation.html){.sidebar-link}
    -   [传感器 sensor](../system/sensor.html){.sidebar-link}
    -   [事件 event](../system/event.html){.sidebar-link}
    -   [电量信息 battery](../system/battery.html){.sidebar-link}
    -   [系统音量 volume](../system/volume.html){.sidebar-link}
    -   [解压缩 zip](../system/zip.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [安全](../security/index.html){.sidebar-heading .clickable}
    -   [密码算法 crypto](../security/crypto.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [其他](../other/index.html){.sidebar-heading .clickable}
    -   [音频 audio](../other/audio.html){.sidebar-link}
    -   [弹窗 prompt](../other/prompt.html){.sidebar-link}
    :::

::: {.page role="main"}
::: {.theme-default-content .content__default}
# [\#](fetch.html#数据请求-fetch){.header-anchor} 数据请求 fetch

## [\#](fetch.html#接口声明){.header-anchor} 接口声明

::: {.language-json .extra-class}
``` language-json
{ "name": "system.fetch" }
```
:::

## [\#](fetch.html#导入模块){.header-anchor} 导入模块

::: {.language-javascript .extra-class}
``` language-javascript
import fetch from '@system.fetch' 
// 或 
const fetch = require('@system.fetch')
```
:::

## [\#](fetch.html#接口定义){.header-anchor} 接口定义

### [\#](fetch.html#fetch-fetch-object){.header-anchor} fetch.fetch(OBJECT) {#fetch-fetch-object}

获取网络数据

#### [\#](fetch.html#参数){.header-anchor} 参数：

  参数名         类型                        必填   说明
  -------------- --------------------------- ------ -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  url            String                      是     资源 url
  data           String/Object/ArrayBuffer   否     请求的参数，可以是字符串，或者是 js 对象、arraybuffer 对象。参考 `data与Content-Type关系` 部分
  header         Object                      否     请求的 header，会将其所有属性设置到请求的 header 部分。User-Agent 设置示例：[{\"Accept-Encoding\": \"gzip, deflate\",\"Accept-Language\": \"zh-CN,en-US;q=0.8,en;q=0.6\"}]{style="word-break:break-all;"}
  method         String                      否     默认为 GET，可以是：[OPTIONS，GET，HEAD，POST，PUT，DELETE，TRACE，CONNECT]{style="word-break:break-all;"}
  responseType   String                      否     支持返回类型是 text，json，file，arraybuffer，默认会根据服务器返回 header 中的 Content-Type 确定返回类型，详见 `success返回值`
  success        Function                    否     成功返回的回调函数
  fail           Function                    否     失败的回调函数，可能会因为权限失败
  complete       Function                    否     结束的回调函数（调用成功、失败都会执行）

#### [\#](fetch.html#data-与-content-type-关系){.header-anchor} data 与 Content-Type 关系

  data          Content-Type                                        说明
  ------------- --------------------------------------------------- ----------------------------------------------------------------------------------------------------------
  String        不设置                                              Content-Type 默认为 text/plain，data 值作为请求的 body
  String        任意 Type                                           data 值作为请求的 body
  Object        不设置                                              Content-Type 默认为 application/x-www-form-urlencoded，data 按照 url 规则进行 encode 拼接作为请求的 body
  Object        application/x-www-form-urlencoded                   data 按照 url 规则进行 encode 拼接作为请求的 body
  Object        application/x-www-form-urlencoded 之外的任意 type   \-
  ArrayBuffer   不设置                                              Content-Type 默认为 application/octet-stream，data 值作为请求的 body
  ArrayBuffer   任意 Type                                           data 值作为请求的 body

#### [\#](fetch.html#success-返回值){.header-anchor} success 返回值：

  参数名    类型                         说明
  --------- ---------------------------- ---------------------------------------------
  code      Integer                      服务器状态 code
  data      String/Object /ArrayBuffer   参考 `responseType与success中data关系` 部分
  headers   Object                       服务器 response 的所有 header

#### [\#](fetch.html#responsetype-与-success-中-data-关系){.header-anchor} responseType 与 success 中 data 关系：

  responseType   data          说明
  -------------- ------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  无             String        服务器返回的 header 中 type 是 text/\*或 application/json、application/javascript、application/xml，值是文本内容，否则是存储的临时文件的 uri，临时文件如果是图片或者视频内容，可以将图片设置到 image
  text           String        返回普通文本
  json           Object        返回 js 对象
  file           String        返回存储的临时文件的 uri
  arraybuffer    ArrayBuffer   返回 ArrayBuffer 对象

#### [\#](fetch.html#示例){.header-anchor} 示例：

::: {.language-javascript .extra-class}
``` language-javascript
fetch.fetch({
  url: 'http://www.example.com',
  responseType: 'text',
  success: function(response) {
    console.log(`the status code of the response: ${response.code}`)
    console.log(`the data of the response: ${response.data}`)
    console.log(
      `the headers of the response: ${JSON.stringify(response.headers)}`
    )
  },
  fail: function(data, code) {
    console.log(`handling fail, errMsg = ${data}`)
    console.log(`handling fail, errCode = ${code}`)
  }
})

// 我们也可以使用promise的方式处理回调
fetch
  .fetch({
    url: 'http://www.example.com',
    responseType: 'text'
  })
  .then(res => {
    const result = res.data

    console.log(`the status code of the response: ${result.code}`)
    console.log(`the data of the response: ${result.data}`)
    console.log(
      `the headers of the response: ${JSON.stringify(result.headers)}`
    )
  })
  .catch(error => {
    console.log(`handling fail, errMsg = ${error.data}`)
    console.log(`handling fail, errCode = ${error.code}`)
  })
```
:::

## [\#](fetch.html#支持明细){.header-anchor} 支持明细

  设备产品                   说明
  -------------------------- --------
  小米 S1 Pro 运动健康手表   支持
  小米手环 8 Pro             不支持
  Xiaomi Watch S3            支持
  Redmi Watch 4              不支持
  小米腕部心电血压记录仪     不支持
  Xiaomi Watch S4            支持
  REDMI Watch 5              支持
:::

::: page-nav
[ ← [应用配置 configuration](../basic/configuration.html){.prev}
]{.prev} [ [设备通信 interconnect](interconnect.html) → ]{.next}
:::
:::

::: toc
::: on-this-page
快速导航
:::

::: {.vuepress-toc-item .vuepress-toc-h2 .active}
[接口声明](fetch.html#接口声明 "接口声明")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[导入模块](fetch.html#导入模块 "导入模块")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[接口定义](fetch.html#接口定义 "接口定义")
:::

::: {.vuepress-toc-item .vuepress-toc-h3}
[fetch.fetch(OBJECT)](fetch.html#fetch-fetch-object "fetch.fetch(OBJECT)")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[支持明细](fetch.html#支持明细 "支持明细")
:::
:::
:::

::: global-ui
:::
:::
