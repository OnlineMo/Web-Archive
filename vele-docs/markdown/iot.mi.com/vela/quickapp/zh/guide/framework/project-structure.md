::: {#app server-rendered="true"}
::: theme-container
::: navbar
::: sidebar-button
![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGFyaWEtaGlkZGVuPSJ0cnVlIiByb2xlPSJpbWciIHZpZXdib3g9IjAgMCA0NDggNTEyIiBjbGFzcz0iaWNvbiI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNDM2IDEyNEgxMmMtNi42MjcgMC0xMi01LjM3My0xMi0xMlY4MGMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6bTAgMTYwSDEyYy02LjYyNyAwLTEyLTUuMzczLTEyLTEydi0zMmMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6bTAgMTYwSDEyYy02LjYyNyAwLTEyLTUuMzczLTEyLTEydi0zMmMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6Ij48L3BhdGg+PC9zdmc+){.icon}
:::

[![Xiaomi Vela JS 应用开发文档](../../../logo.png){.logo} [Xiaomi Vela
JS 应用开发文档]{.site-name
.can-hide}](https://iot.mi.com/vela/quickapp/){.home-link
.router-link-active}

::: links
::: search-box
:::

::: nav-item
[教程](../version/APILevel4.html){.nav-link .router-link-active}
:::

::: nav-item
[组件](../../components/index.html){.nav-link}
:::

::: nav-item
[JS接口](../../features/index.html){.nav-link}
:::

::: nav-item
[编程示例](../../samples/index.html){.nav-link}
:::

::: nav-item
[工具](../../tools/index.html){.nav-link}
:::
:::
:::

::: sidebar-mask
:::

::: nav-item
[教程](../version/APILevel4.html){.nav-link .router-link-active}
:::

::: nav-item
[组件](../../components/index.html){.nav-link}
:::

::: nav-item
[JS接口](../../features/index.html){.nav-link}
:::

::: nav-item
[编程示例](../../samples/index.html){.nav-link}
:::

::: nav-item
[工具](../../tools/index.html){.nav-link}
:::

-   ::: {.section .sidebar-group .depth-0}
    [快速入门](https://iot.mi.com/vela/quickapp/zh/guide/start){.sidebar-heading
    .clickable}
    -   [安装环境](../start/use-ide.html){.sidebar-link}
    -   [项目结构](../start/project-overview.html){.sidebar-link}
    -   [编写页面UI](../start/user-interface.html){.sidebar-link}
    -   [添加交互](../start/add-interactivity.html){.sidebar-link}
    -   [数据获取](../start/data-fetch.html){.sidebar-link}
    -   [编译参数](../start/toolkit-params.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [基础功能](index.html){.sidebar-heading .clickable
    .router-link-active .open}
    -   [项目结构](project-structure.html){.active .sidebar-link
        aria-current="page"}

    -   [项目配置](manifest.html){.sidebar-link}

    -   [UX 文件](ux.html){.sidebar-link}

    -   ::: {.section .sidebar-group .collapsable .is-sub-group .depth-1}
        [模板语法 []{.arrow
        .right}](template/index.html){.sidebar-heading .clickable}
        :::

    -   ::: {.section .sidebar-group .collapsable .is-sub-group .depth-1}
        [样式语法 []{.arrow .right}](style/index.html){.sidebar-heading
        .clickable}
        :::

    -   ::: {.section .sidebar-group .collapsable .is-sub-group .depth-1}
        [脚本语法 []{.arrow .right}](script/index.html){.sidebar-heading
        .clickable}
        :::

    -   [页面切换](page-switch.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [进阶功能](other/index.html){.sidebar-heading .clickable}
    -   [多语言覆盖](other/i18n.html){.sidebar-link}

    -   [后台运行](other/background-running.html){.sidebar-link}

    -   [hap 链接](other/hap-schema.html){.sidebar-link}

    -   [页面启动模式](other/launch-mode.html){.sidebar-link}

    -   ::: {.section .sidebar-group .is-sub-group .depth-1}
        [多屏适配](../multi-screens/index.html){.sidebar-heading
        .clickable}
        -   [适配规范](../multi-screens/specs.html){.sidebar-link}
        -   [代码示例](../multi-screens/samples.html){.sidebar-link}
        -   [条件编译](../multi-screens/conditional-compilation.html){.sidebar-link}
        :::
    :::

-   ::: {.section .sidebar-group .depth-0}
    [开发者物料](../developer-materials/index.html){.sidebar-heading
    .clickable}
    -   [拓展组件](../developer-materials/extension-components.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [设计指南](../design/index.html){.sidebar-heading .clickable}
    -   [多屏设计](../design/multi-screens.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [最佳实践](../best-practice/index.html){.sidebar-heading .clickable}
    -   [内存优化](../best-practice/memory.html){.sidebar-link}
    -   [常用业务优化](../best-practice/business.html){.sidebar-link}
    -   [启动时延优化](../best-practice/start.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [发布](../publish/index.html){.sidebar-heading .clickable}
    -   [验收标准](../publish/acceptance-criteria.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [版本说明](../version/index.html){.sidebar-heading .clickable}
    -   [APILevel2](https://iot.mi.com/vela/quickapp/zh/guide/version/APILevel2.html){.sidebar-link}
    -   [APILevel3](https://iot.mi.com/vela/quickapp/zh/guide/version/APILevel3.html){.sidebar-link}
    -   [APILevel4](https://iot.mi.com/vela/quickapp/zh/guide/version/APILevel4.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    其他

    -   [常见问题](../other/faq.html){.sidebar-link}
    -   [注意事项](../other/tips.html){.sidebar-link}
    :::

::: {.page role="main"}
::: {.theme-default-content .content__default}
# [\#](project-structure.html#项目结构){.header-anchor} 项目结构

## [\#](project-structure.html#应用资源){.header-anchor} 应用资源

一个应用包含：描述项目配置信息的[manifest
文件](manifest.html)，放置项目公共资源脚本的[app.ux
文件](ux.html)，多个描述页面的[ux 文件](ux.html)，典型示例如下：

应用根目录：

::: {.language- .extra-class}
``` language-text
├── manifest.json
├── app.ux
├── pages
│   ├── index
|   |   └── index.ux
│   └── detail
|       └── detail.ux
├── i18n
|   ├── defaults.json
|   ├── zh-CN.json
|   └── en-US.json
└── common
    ├── style.css
    ├── utils.js
    └── logo.png
```
:::

## [\#](project-structure.html#ux模板){.header-anchor} ux模板

一个页面通常都由三部分组成：页面结构、样式和逻辑交互。这三部分，可以放在一个ux文件中，也可以作为独立的文件。

如果放在一个ux文件中，则ux文件需要包含三标签：`template`、`style`和`script`。

示例：

::: {.language-html .extra-class}
``` language-html
<template>
  <div class="page">
    <text class="title">欢迎打开{{title}}</text>
    <input class="btn" type="button" value="跳转到详情页" onclick="routeDetail">
  </div>
</template>

<style>
  .btn {
    width: 400px;
    height: 60px;
    background-color: #09ba07;
    color: #ffffff;
  }
</style>

<script>
  import router from '@system.router'

  export default {
    // 页面数据对象
    private: {
      title: '示例页面'
    },
    // 按钮点击后的回调
    routeDetail() {
      router.push({
        uri: '/pages/detail'
      })
    }
  }
</script>
```
:::

如果将页面结构、样式和逻辑交互分开作为独立的文件，可以使用如下目录结构：

::: {.language-bash .extra-class}
``` language-bash
├── ...
├── pages
│   ├── ...
│   └── detail
|       ├── detail.ux
|       ├── detail.css
|       └── detail.js
├── ...
```
:::

::: {.custom-block .tip}
说明

如果作为独立的文件，将ux/css/js文件分开后，ux文件中不能包含`template`标签。
:::

## [\#](project-structure.html#文件存储){.header-anchor} 文件存储

在应用平台中是按分区来存储文件的，目前支持以下分区：

1.  Cache，一般用于存储缓存文件，比如通过 fetch
    接口下载的文件会存储在该分区中，该分区中的文件可能因存储空间不够被系统删除；
2.  Files，一般用于存储比较小的永久文件，该分区中的文件由应用自己管理；
3.  Mass，一般用于存储比较大的文件，但该分区并不保证一直可用；
4.  Temp，表示从外部映射过来的临时文件，出于安全性考虑，临时文件是只读的，并且只能通过调用特定的
    API 获取，比如 file.readText
    方法。另外临时文件的访问是临时的，应用重启后无法访问到临时文件，需要通过特定
    API 重新获取。

另外应用资源也作为一个特殊的只读分区进行处理。

## [\#](project-structure.html#uri){.header-anchor} URI

URI
用于标识应用资源和文件，[组件](../../components/index.html)和[接口](../../features/index.html)通过
URI 来访问应用资源和文件。

  资源类型   URI                     只读   示例                                说明
  ---------- ----------------------- ------ ----------------------------------- ----------------
  应用资源   /path                   是     /Common/header.png                  \-
  Cache      internal://cache/path   否     internal://cache/fetch-123456.png   \-
  Files      internal://files/path   否     internal://files/image/demo.png     \-
  Mass       internal://mass/path    否     internal://mass/video/demo.mp4      \-
  Temp       internal://tmp/path     是     internal://tmp/xxxxx                由系统动态生成

URI 允许的字符是`0-9a-zA-Z_-./%:`(不包含引号)，URI 中不能出现`..`，URI
支持目录结构，目录由斜线\'/\'分隔。

internal URI 表示的是应用私有文件，即在指定 internal URI
时，无需指定应用标识，同一个 internal URI
对于不同的应用会指向不同的文件。

## [\#](project-structure.html#资源和文件访问规则){.header-anchor} 资源和文件访问规则

应用资源路径分为绝对路径和相对路径，以\"/\"开头的路径表示绝对路径，比如
/Common/a.png，不以\"/\"开头的路径是相对路径，比如 a.png 和
../Common/a.png 等。

应用资源文件分为代码文件和资源文件，代码文件是指 .js/.css/.ux
等包含代码的文件，其他文件则是资源文件，这类文件一般只当作数据来使用，比如图片、视频等。

1.  在代码文件中，导入其他代码文件时，使用相对路径，比如：../Common/component.ux；
2.  在代码文件中，引用资源文件(如：图片、视频等)时，一般情况下使用相对路径，比如：./abc.png；
3.  当代码文件需要被导入时，如果导入文件与被导入文件在同一个目录，被导入文件引用资源文件时可以使用相对路径，但如果不在同一目录，必须使用绝对路径，因为被导入文件编译时会被复制到导入文件中，编译后目录会发生变化。比如
    a.css 文件被 b.ux 导入，如果 a.css 与 b.ux 在同一个目录，a.css
    引用资源文件时可以写相对路径：abc.png，如果不在同一个目录，必须写绝对路径：/Common/abc.png，再比如当
    a.ux 文件被 b.ux 文件导入时，如果 a.ux 与 b.ux 在同一个目录，a.ux
    引用资源文件时可以写相对路径：a.png，如果不在同一个目录，a.ux
    引用资源必须写绝对路径：/Common/abc.png；
4.  在 CSS 中，与前端开发一致，使用
    url(PATH)的方式访问资源文件，如：url(/Common/abc.png)。
:::

::: page-nav
[ ← [编译参数](../start/toolkit-params.html){.prev} ]{.prev} [
[项目配置](manifest.html) → ]{.next}
:::
:::

::: toc
::: on-this-page
快速导航
:::

::: {.vuepress-toc-item .vuepress-toc-h2 .active}
[应用资源](project-structure.html#应用资源 "应用资源")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[ux模板](project-structure.html#ux模板 "ux模板")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[文件存储](project-structure.html#文件存储 "文件存储")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[URI](project-structure.html#uri "URI")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[资源和文件访问规则](project-structure.html#资源和文件访问规则 "资源和文件访问规则")
:::
:::
:::

::: global-ui
:::
:::
