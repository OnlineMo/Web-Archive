::: {#app server-rendered="true"}
::: theme-container
::: navbar
::: sidebar-button
![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGFyaWEtaGlkZGVuPSJ0cnVlIiByb2xlPSJpbWciIHZpZXdib3g9IjAgMCA0NDggNTEyIiBjbGFzcz0iaWNvbiI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNDM2IDEyNEgxMmMtNi42MjcgMC0xMi01LjM3My0xMi0xMlY4MGMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6bTAgMTYwSDEyYy02LjYyNyAwLTEyLTUuMzczLTEyLTEydi0zMmMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6bTAgMTYwSDEyYy02LjYyNyAwLTEyLTUuMzczLTEyLTEydi0zMmMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6Ij48L3BhdGg+PC9zdmc+){.icon}
:::

[![Xiaomi Vela JS 应用开发文档](../../../../logo.png){.logo} [Xiaomi
Vela JS 应用开发文档]{.site-name
.can-hide}](https://iot.mi.com/vela/quickapp/){.home-link
.router-link-active}

::: links
::: search-box
:::

::: nav-item
[教程](../../version/APILevel4.html){.nav-link .router-link-active}
:::

::: nav-item
[组件](../../../components/index.html){.nav-link}
:::

::: nav-item
[JS接口](../../../features/index.html){.nav-link}
:::

::: nav-item
[编程示例](../../../samples/index.html){.nav-link}
:::

::: nav-item
[工具](../../../tools/index.html){.nav-link}
:::
:::
:::

::: sidebar-mask
:::

::: nav-item
[教程](../../version/APILevel4.html){.nav-link .router-link-active}
:::

::: nav-item
[组件](../../../components/index.html){.nav-link}
:::

::: nav-item
[JS接口](../../../features/index.html){.nav-link}
:::

::: nav-item
[编程示例](../../../samples/index.html){.nav-link}
:::

::: nav-item
[工具](../../../tools/index.html){.nav-link}
:::

-   ::: {.section .sidebar-group .depth-0}
    [快速入门](https://iot.mi.com/vela/quickapp/zh/guide/start){.sidebar-heading
    .clickable}
    -   [安装环境](../../start/use-ide.html){.sidebar-link}
    -   [项目结构](../../start/project-overview.html){.sidebar-link}
    -   [编写页面UI](../../start/user-interface.html){.sidebar-link}
    -   [添加交互](../../start/add-interactivity.html){.sidebar-link}
    -   [数据获取](../../start/data-fetch.html){.sidebar-link}
    -   [编译参数](../../start/toolkit-params.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [基础功能](../index.html){.sidebar-heading .clickable
    .router-link-active .open}
    -   [项目结构](../project-structure.html){.sidebar-link}

    -   [项目配置](../manifest.html){.sidebar-link}

    -   [UX 文件](../ux.html){.sidebar-link}

    -   ::: {.section .sidebar-group .collapsable .is-sub-group .depth-1}
        [模板语法 []{.arrow .down}](index.html){.sidebar-heading
        .clickable .router-link-exact-active .router-link-active .open
        .active aria-current="page"}
        -   [Props](Props.html){.sidebar-link}
        -   [事件绑定](event.html){.sidebar-link}
        -   [循环指令](for.html){.sidebar-link}
        -   [条件指令](if.html){.sidebar-link}
        -   [计算属性](computed.html){.sidebar-link}
        -   [组件](component.html){.sidebar-link}
        :::

    -   ::: {.section .sidebar-group .collapsable .is-sub-group .depth-1}
        [样式语法 []{.arrow
        .right}](../style/index.html){.sidebar-heading .clickable}
        :::

    -   ::: {.section .sidebar-group .collapsable .is-sub-group .depth-1}
        [脚本语法 []{.arrow
        .right}](../script/index.html){.sidebar-heading .clickable}
        :::

    -   [页面切换](../page-switch.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [进阶功能](../other/index.html){.sidebar-heading .clickable}
    -   [多语言覆盖](../other/i18n.html){.sidebar-link}

    -   [后台运行](../other/background-running.html){.sidebar-link}

    -   [hap 链接](../other/hap-schema.html){.sidebar-link}

    -   [页面启动模式](../other/launch-mode.html){.sidebar-link}

    -   ::: {.section .sidebar-group .is-sub-group .depth-1}
        [多屏适配](../../multi-screens/index.html){.sidebar-heading
        .clickable}
        -   [适配规范](../../multi-screens/specs.html){.sidebar-link}
        -   [代码示例](../../multi-screens/samples.html){.sidebar-link}
        -   [条件编译](../../multi-screens/conditional-compilation.html){.sidebar-link}
        :::
    :::

-   ::: {.section .sidebar-group .depth-0}
    [开发者物料](../../developer-materials/index.html){.sidebar-heading
    .clickable}
    -   [拓展组件](../../developer-materials/extension-components.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [设计指南](../../design/index.html){.sidebar-heading .clickable}
    -   [多屏设计](../../design/multi-screens.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [最佳实践](../../best-practice/index.html){.sidebar-heading
    .clickable}
    -   [内存优化](../../best-practice/memory.html){.sidebar-link}
    -   [常用业务优化](../../best-practice/business.html){.sidebar-link}
    -   [启动时延优化](../../best-practice/start.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [发布](../../publish/index.html){.sidebar-heading .clickable}
    -   [验收标准](../../publish/acceptance-criteria.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [版本说明](../../version/index.html){.sidebar-heading .clickable}
    -   [APILevel2](https://iot.mi.com/vela/quickapp/zh/guide/version/APILevel2.html){.sidebar-link}
    -   [APILevel3](https://iot.mi.com/vela/quickapp/zh/guide/version/APILevel3.html){.sidebar-link}
    -   [APILevel4](https://iot.mi.com/vela/quickapp/zh/guide/version/APILevel4.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    其他

    -   [常见问题](../../other/faq.html){.sidebar-link}
    -   [注意事项](../../other/tips.html){.sidebar-link}
    :::

::: {.page role="main"}
::: {.theme-default-content .content__default}
# [\#](index.html#template-模板){.header-anchor} template 模板

类似`HTML`的标签语言，结合基础组件、事件，构建出页面的结构。

::: {.custom-block .warning}
注意

模板中只能有 1
个根节点，如：div；请不要在`<template>`下存在多个根节点，也不要使用
block 作为根节点。
:::

## [\#](index.html#数据绑定){.header-anchor} 数据绑定

::: {.language-html .extra-class}
``` language-html
<template>
  <text>{{message}}</text>
</template>

<script>
  export default {
    // 页面级组件的数据模型，影响传入数据的覆盖机制：private内定义的属性不允许被覆盖
    private: {
      message: 'Hello'
    }
  }
</script>
```
:::

## [\#](index.html#事件绑定){.header-anchor} 事件绑定

::: {.language-html .extra-class}
``` language-html
<template>
  <div>
    <!-- 正常格式 -->
    <text onclick="press"></text>
    <!-- 缩写 -->
    <text @click="press"></text>
  </div>
</template>

<script>
  export default {
    press(e) {
      this.title = 'Hello'
    }
  }
</script>
```
:::

事件回调支持的写法（其中`{{}}`可以省略）：

**fn**：`fn`为事件回调函数名（在`<script>`中有对应的函数实现）；

**fn(a,b)**：函数参数例如`a`，`b`可以是常量，或者是在`<script>`中定义的页面的数据变量（前面不用写`this`）；

回调函数被调用时，会在参数列表末尾自动添加一个`evt`参数，通过`evt`参数访问回调事件相关上下文数据（数据内容具体参看组件回调事件说明），例如点击事件的点击位置`x`，`y`。

## [\#](index.html#列表渲染){.header-anchor} 列表渲染

::: {.language-html .extra-class}
``` language-html
<template>
  <div>
    <div for="{{list}}" tid="uniqueId">
      <text>{{$idx}}</text>
      <text>{{$item.uniqueId}}</text>
    </div>
  </div>
</template>

<script>
  export default {
    // 页面级组件的数据模型，影响传入数据的覆盖机制：private内定义的属性不允许被覆盖
    private: {
      list: [
        { uniqueId: 1 },
        { uniqueId: 2 }
      ]
    }
  }
</script>
```
:::

`for指令`根据源数据数组渲染列表，支持的写法如下（其中`{{}}`可以省略）：

-   `for="{{list}}"` `list`为源数据数组，默认的数组元素名为`$item`；
-   `for="{{value in list}}"`
    `value`为自定义的数组元素名，默认的数组元素索引名为`$idx`；
-   `for="{{(index, value) in list}}"`
    `index`为自定义的数组元素索引名，`value`为自定义的数组元素名。

`for指令`的`tid属性`用于指定数组元素的唯一
Id，若未指定，默认使用数组索引(`$idx`)作为唯一
Id。`tid属性`的作用在于元素节点重用，优化 for 循环的重绘效率。

示例代码中，`tid="uniqueId"`表示使用数组`list`的数组元素`$item.uniqueId`作为数组元素的唯一
Id，且必须保证 uniqueId 这个属性值在每个数组元素都不一样。

使用`tid属性`时应注意：

-   `tid属性`指定的数据属性必须存在，否则可能导致运行异常；
-   `tid属性`指定的数据属性要保证唯一，否则可能导致性能问题；
-   `tid属性`目前不支持表达式。

## [\#](index.html#条件渲染){.header-anchor} 条件渲染

分为2种：`if/elif/else`
和`show`。它们的区别在于：`if`为`false`时，组件会从VDOM中移除，而`show`仅仅是渲染时不可见，组件依然存在于
VDOM 中；

`if/elif/else`节点必须是相邻的兄弟节点，否则无法通过编译。

::: {.language-html .extra-class}
``` language-html
<template>
  <div>
    <text if="{{display}}">Hello-1</text>
    <text elif="{{display}}">Hello-2</text>
    <text else>Hello-3</text>
  </div>
</template>

<script>
  export default {
    // 页面级组件的数据模型，影响传入数据的覆盖机制：private内定义的属性不允许被覆盖
    private: {
      display: false
    }
  }
</script>
```
:::

`show`等同于`visible=none`，主要用于在原生组件上声明；

::: {.language-html .extra-class}
``` language-html
<template>
  <text show="{{visible}}">Hello</text>
</template>

<script>
  export default {
    // 页面级组件的数据模型，影响传入数据的覆盖机制：private内定义的属性不允许被覆盖
    private: {
      visible: false
    }
  }
</script>
```
:::

## [\#](index.html#逻辑控制块){.header-anchor} 逻辑控制块

可以使用`<block>`实现更为灵活的循环/条件渲染；注意`<block>`目前只支持`for`和`if/elif/else`属性，如果没有指定任何属性，`<block>`则在构建时被当作`透明`节点对待，其子节点被添加到`<block>`的父节点上。

::: {.language-html .extra-class}
``` language-html
<template>
  <list>
    <block for="cities">
      <list-item type="city">
        <text>{{$item.name}}</text>
      </list-item>
      <list-item type="spot" for="$item.spots">
        <text>{{$item.address}}</text>
      </list-item>
    </block>
  </list>
</template>

<script>
  export default {
    // 页面级组件的数据模型，影响传入数据的覆盖机制：private内定义的属性不允许被覆盖
    private: {
      cities: [
        {
          name: 'beijing',
          spots: [
            { address: 'XXX' }
          ]
        },
        {
          name: 'shanghai',
          spots: [
            { address: 'XXX' },
            { address: 'XXX' }
          ]
        }
      ]
    }
  }
</script>
```
:::
:::
:::

::: toc
::: on-this-page
快速导航
:::

::: {.vuepress-toc-item .vuepress-toc-h2 .active}
[数据绑定](index.html#数据绑定 "数据绑定")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[事件绑定](index.html#事件绑定 "事件绑定")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[列表渲染](index.html#列表渲染 "列表渲染")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[条件渲染](index.html#条件渲染 "条件渲染")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[逻辑控制块](index.html#逻辑控制块 "逻辑控制块")
:::
:::
:::

::: global-ui
:::
:::
