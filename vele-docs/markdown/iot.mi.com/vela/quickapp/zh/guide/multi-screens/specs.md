::: {#app server-rendered="true"}
::: theme-container
::: navbar
::: sidebar-button
![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGFyaWEtaGlkZGVuPSJ0cnVlIiByb2xlPSJpbWciIHZpZXdib3g9IjAgMCA0NDggNTEyIiBjbGFzcz0iaWNvbiI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNDM2IDEyNEgxMmMtNi42MjcgMC0xMi01LjM3My0xMi0xMlY4MGMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6bTAgMTYwSDEyYy02LjYyNyAwLTEyLTUuMzczLTEyLTEydi0zMmMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6bTAgMTYwSDEyYy02LjYyNyAwLTEyLTUuMzczLTEyLTEydi0zMmMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6Ij48L3BhdGg+PC9zdmc+){.icon}
:::

[![Xiaomi Vela JS 应用](../../../logo.png){.logo} [Xiaomi Vela JS
应用]{.site-name
.can-hide}](https://iot.mi.com/vela/quickapp/){.home-link
.router-link-active}

::: links
::: search-box
:::

::: nav-item
[教程](../version/APILevel4.html){.nav-link .router-link-active}
:::

::: nav-item
[组件](../../components/index.html){.nav-link}
:::

::: nav-item
[JS接口](../../features/index.html){.nav-link}
:::

::: nav-item
[编程示例](../../samples/index.html){.nav-link}
:::

::: nav-item
[工具](../../tools/index.html){.nav-link}
:::

::: nav-item
::: dropdown-wrapper
[选择语言]{.title} []{.arrow .down}

[选择语言]{.title} []{.arrow .right}

-   [简体中文](specs.html){.nav-link .router-link-exact-active
    .router-link-active aria-current="page"}
-   [English](https://iot.mi.com/vela/quickapp/en/guide/multi-screens/specs.html){.nav-link}
:::
:::
:::
:::

::: sidebar-mask
:::

::: nav-item
[教程](../version/APILevel4.html){.nav-link .router-link-active}
:::

::: nav-item
[组件](../../components/index.html){.nav-link}
:::

::: nav-item
[JS接口](../../features/index.html){.nav-link}
:::

::: nav-item
[编程示例](../../samples/index.html){.nav-link}
:::

::: nav-item
[工具](../../tools/index.html){.nav-link}
:::

::: nav-item
::: dropdown-wrapper
[选择语言]{.title} []{.arrow .down}

[选择语言]{.title} []{.arrow .right}

-   [简体中文](specs.html){.nav-link .router-link-exact-active
    .router-link-active aria-current="page"}
-   [English](https://iot.mi.com/vela/quickapp/en/guide/multi-screens/specs.html){.nav-link}
:::
:::

-   ::: {.section .sidebar-group .depth-0}
    [快速入门](https://iot.mi.com/vela/quickapp/zh/guide/start){.sidebar-heading
    .clickable}
    -   [安装环境](../start/use-ide.html){.sidebar-link}
    -   [项目结构](../start/project-overview.html){.sidebar-link}
    -   [编写页面UI](../start/user-interface.html){.sidebar-link}
    -   [添加交互](../start/add-interactivity.html){.sidebar-link}
    -   [数据获取](../start/data-fetch.html){.sidebar-link}
    -   [编译参数](../start/toolkit-params.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [基础功能](../framework/index.html){.sidebar-heading .clickable}
    -   [项目结构](../framework/project-structure.html){.sidebar-link}

    -   [项目配置](../framework/manifest.html){.sidebar-link}

    -   [UX 文件](../framework/ux.html){.sidebar-link}

    -   ::: {.section .sidebar-group .collapsable .is-sub-group .depth-1}
        [模板语法 []{.arrow
        .right}](../framework/template/index.html){.sidebar-heading
        .clickable}
        :::

    -   ::: {.section .sidebar-group .collapsable .is-sub-group .depth-1}
        [样式语法 []{.arrow
        .right}](../framework/style/index.html){.sidebar-heading
        .clickable}
        :::

    -   ::: {.section .sidebar-group .collapsable .is-sub-group .depth-1}
        [脚本语法 []{.arrow
        .right}](../framework/script/index.html){.sidebar-heading
        .clickable}
        :::

    -   [页面切换](../framework/page-switch.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [进阶功能](../framework/other/index.html){.sidebar-heading
    .clickable .open}
    -   [多语言覆盖](../framework/other/i18n.html){.sidebar-link}

    -   [后台运行](../framework/other/background-running.html){.sidebar-link}

    -   [hap 链接](../framework/other/hap-schema.html){.sidebar-link}

    -   [页面启动模式](../framework/other/launch-mode.html){.sidebar-link}

    -   ::: {.section .sidebar-group .collapsable .is-sub-group .depth-1}
        [多屏适配 []{.arrow .down}](index.html){.sidebar-heading
        .clickable .router-link-active .open}
        -   [适配规范](specs.html){.active .sidebar-link
            aria-current="page"}
        -   [代码示例](samples.html){.sidebar-link}
        -   [条件编译](conditional-compilation.html){.sidebar-link}
        :::

    -   [动态组件](../framework/other/dynamic-component.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [开发者物料](../developer-materials/index.html){.sidebar-heading
    .clickable}
    -   [拓展组件](../developer-materials/extension-components.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [设计指南](../design/index.html){.sidebar-heading .clickable}
    -   [多屏设计](../design/multi-screens.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [最佳实践](../best-practice/index.html){.sidebar-heading .clickable}
    -   [内存优化](../best-practice/memory.html){.sidebar-link}
    -   [常用业务优化](../best-practice/business.html){.sidebar-link}
    -   [启动时延优化](../best-practice/start.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [发布](../publish/index.html){.sidebar-heading .clickable}
    -   [验收标准](../publish/acceptance-criteria.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [版本说明](../version/index.html){.sidebar-heading .clickable}
    -   [APILevel2](https://iot.mi.com/vela/quickapp/zh/guide/version/APILevel2.html){.sidebar-link}
    -   [APILevel3](https://iot.mi.com/vela/quickapp/zh/guide/version/APILevel3.html){.sidebar-link}
    -   [APILevel4](https://iot.mi.com/vela/quickapp/zh/guide/version/APILevel4.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    其他

    -   [常见问题](../other/faq.html){.sidebar-link}
    -   [注意事项](../other/tips.html){.sidebar-link}
    :::

::: {.page role="main"}
::: {.theme-default-content .content__default}
# [\#](specs.html#适配规范){.header-anchor} 适配规范

Vela OS 支持一系列适配多种屏幕的技术能力。

## [\#](specs.html#自适应布局){.header-anchor} 自适应布局

系统提供的容器组件均默认遵循 Flex
弹性布局规则，使用弹性布局可以实现屏幕自适应布局。

比如以下代码可以实现行内多个 item 平均分布。

::: {.language-html .extra-class}
``` language-html
<div>
  <text style="flex-grow: 1; background-color:aqua;">1</text>
  <text style="flex-grow: 1; background-color:yellow;">2</text>
  <text style="flex-grow: 1; background-color:red;">3</text>
</div>
```
:::

![](../../../images/multi-screens/flex-items.png)

更多说明请参考[Flex
布局示例](../framework/style/page-style-and-layout.html#flex-布局示例)

## [\#](specs.html#自适应单位){.header-anchor} 自适应单位

在编写 UI 样式时，可以采用系统提供的自适应长度单位，包括：

-   px
-   \%

### [\#](specs.html#px){.header-anchor} px

px 在 Vela
应用中不表示屏幕的物理像素，而是相对于项目配置基准宽度的单位，其原理类似于rem。

开发者在 manifest 文件中将 designWidth
字段配置为设计基准宽度（设计稿宽度），然后在样式描述中使用该长度单位，数值直接使用设计稿中的像素值，系统将自动计算使
Vela 应用 UI 在不同屏幕上进行等比缩放。

::: {.language-html .extra-class}
``` language-html
{
  "config": {
    "designWidth": 336
  }
}
```
:::

::: {.language-html .extra-class}
``` language-html
<template>
  <div class="demo-page">
    <div class="container"></div>
  </div>
</template>

<style>
.demo-page {
  justify-content: center;
  align-items: center;
}
.container {
  width: 168px;
  height: 168px;
  background-color: aquamarine;
}
</style>
```
:::

如上示例中将 designWidth 配置为 336px，那么所有的 px 值使用都会按照
336px 的基准宽度换算。 假设设备屏幕实际宽度为 336 像素，则 container
元素的实际宽度也为 168 像素；如果设备屏幕实际宽度为 192 像素，则
container 元素的实际宽度为 96 像素。

336\*480 屏幕 / 192\*490 屏幕

::: {style="display:flex;align-items:flex-end;"}
![](../../../images/multi-screens/px-demo2.png){style="width:34%;"}
![](../../../images/multi-screens/px-demo1.png){style="width:21%;margin-left:20px;"}
:::

更多说明请参考[长度单位](../framework/style/page-style-and-layout.html#长度单位)

### [\#](specs.html#百分比){.header-anchor} 百分比%

\%
表示百分比，许多样式属性可以取百分比值，经常用以根据父对象来确定大小。

比如以下代码可以实现行内多个 item 按百分比占据父容器宽度，

::: {.language-html .extra-class}
``` language-html
<div>
  <text style="width: 20%; background-color:aqua;">1</text>
  <text style="width: 40%; background-color:yellow;">2</text>
  <text style="width: 40%; background-color:red;">3</text>
</div>
```
:::

![](../../../images/multi-screens/percent.png)

更多说明请参考[CSS
百分比单位![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGFyaWEtaGlkZGVuPSJ0cnVlIiBmb2N1c2FibGU9ImZhbHNlIiB4PSIwcHgiIHk9IjBweCIgdmlld2JveD0iMCAwIDEwMCAxMDAiIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNSIgY2xhc3M9Imljb24gb3V0Ym91bmQiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTE4LjgsODUuMWg1NmwwLDBjMi4yLDAsNC0xLjgsNC00di0zMmgtOHYyOGgtNDh2LTQ4aDI4di04aC0zMmwwLDBjLTIuMiwwLTQsMS44LTQsNHY1NkMxNC44LDgzLjMsMTYuNiw4NS4xLDE4LjgsODUuMXoiPjwvcGF0aD4gPHBvbHlnb24gZmlsbD0iY3VycmVudENvbG9yIiBwb2ludHM9IjQ1LjcsNDguNyA1MS4zLDU0LjMgNzcuMiwyOC41IDc3LjIsMzcuMiA4NS4yLDM3LjIgODUuMiwxNC45IDYyLjgsMTQuOSA2Mi44LDIyLjkgNzEuNSwyMi45Ij48L3BvbHlnb24+PC9zdmc+){.icon
.outbound} [(opens new
window)]{.sr-only}](https://developer.mozilla.org/zh-CN/docs/Web/CSS/percentage){target="_blank"
rel="noopener noreferrer"}

## [\#](specs.html#固定长度单位){.header-anchor} 固定长度单位[[3+]{.badge .apilevel style="vertical-align:top;" v-15b7b770=""}](../version/APILevel3.html){.apilevel-a} {#固定长度单位}

在有的布局场景下，需要使用固定长度单位，系统支持的 dp
长度单位可满足这个需求。

DP 长度单位表示设备独立像素（device-independent
pixel），也叫密度无关像素，可以认为是计算机坐标系统中的一个点，这个点代表一个可以由程序使用的逻辑像素，是一个近似物理尺寸的单位，其计算公式为：

::: {.language-html .extra-class}
``` language-html
屏幕宽度的 DP 值 = 屏幕分辨率的宽度 / DPR
元素宽/高度的 DP 值 = 元素宽/高度的物理像素数 / DPR
```
:::

DPR 表示设备像素比（device pixel
ratio），是设备物理像素和逻辑像素（DP）的比值，其计算公式为：

::: {.language-html .extra-class}
``` language-html
DPR = 设备 PPI / 160
```
:::

PPI（pixels per inch）表示每英寸的像素数，表征屏幕的物理密度，因此 DPR
又被称为逻辑密度。 设备屏幕的逻辑密度值（DPR）可以通过 device 接口获取。

比如以下代码可以实现元素在不同尺寸屏幕上保持近似的物理尺寸，从而在大屏幕上呈现更多的元素。

::: {.language-html .extra-class}
``` language-html
<template>
  <div class="container">
    <div class="text-box">
      <text style="background-color: aquamarine;">
        A
      </text>
      <text style="background-color: #ff0000;">
        B
      </text>
      <text style="background-color: #00ff00;">
        C
      </text>
      <text style="background-color: #0000ff;">
        D
      </text>
    </div>
  </div>
</template>

<style>
  .container {
    justify-content: center;
    align-items: center;
  }
  .text-box {
    justify-content: center;
    flex-wrap: wrap;
  }
  text {
    width:116dp;
    height: 30dp;
    font-size: 15dp;
    text-align: center;
  }
</style>
```
:::

466\*466 屏幕 / 192\*490 屏幕

::: {style="display:flex;align-items:flex-end;"}
![](../../../images/multi-screens/dp-demo1.png){style="width:47%;"}
![](../../../images/multi-screens/dp-demo2.png){style="width:21%;margin-left:20px;"}
:::

## [\#](specs.html#媒体查询){.header-anchor} 媒体查询

媒体查询是 CSS3
引入的一个功能，用于根据不同的屏幕尺寸和设备类型，为网页应用不同的样式。

在 Vela JS
应用中，也可以使用类似的媒体查询规范来针对不同屏幕和设备编写样式，详细介绍请参考[媒体查询](../framework/style/media-query.html)。

比如以下代码可以实现根据屏幕形状来应用不同的样式。

注意: 以下示例代码的`designWidth`为`466`

::: {.language-html .extra-class}
``` language-html
<template>
  <div class="container">
    <text>10:30</text>
    <text>我的待办</text>
  </div>
</template>

<style>
  /* 当屏幕为圆形屏幕时 */
  @media screen and (shape: circle) {
    .container {
      padding-left: 80px;
      padding-right: 80px;
      padding-top: 40px;
      flex-direction: row;
      align-items: flex-start;
      justify-content: space-between;
    }
    text {
      font-size: 40px;
    }
  }
  /* 当屏幕为胶囊形屏幕时 */
  @media screen and (shape: pill-shaped) {
    .container {
      padding-top: 50px;
      flex-direction: column;
      align-items: center;
    }
    text {
      margin-top: 10px;
    }
  }
</style>
```
:::

466\*466 屏幕 / 192\*490 屏幕

::: {style="display:flex;align-items:flex-end;"}
![](../../../images/multi-screens/mediaquery-demo2.png){style="width:47%;"}
![](../../../images/multi-screens/mediaquery-demo1.png){style="width:21%;margin-left:20px;"}
:::

## [\#](specs.html#获取屏幕信息){.header-anchor} 获取屏幕信息

在 Vela JS 应用中，可以通过 device feature
接口获取屏幕信息，包括屏幕形状、屏幕分辨率等。根据获取到的结果可以进行相应的样式适配。

比如以下代码可以实现根据屏幕形状决定 progress 组件的类型（是否是弧形）。

::: {.language-html .extra-class}
``` language-html
<template>
  <div class="container">
    <progress percent="80" type="{{progressType}}"></progress>
  </div>
</template>

<script>
  import device from '@system.device'

  export default {
    data: {
      progressType: "horizontal"
    },
    onInit() {
      const that = this
      device.getInfo({
        success: function(ret) {
          that.progressType = ret.screenShape === "circle" ? "arc" : "horizontal"
        }
      })
    }
  }
</script>

<style>
  .container {
    padding: 20px;
  }
</style>
```
:::

圆形屏幕 / 矩形屏幕

::: {style="display:flex;align-items:flex-end;"}
![](../../../images/multi-screens/shape-circle.png){style="width:48%;"}
![](../../../images/multi-screens/shape-rect.png){style="width:35%;margin-left:20px;"}
:::

详细介绍请参考 [设备信息 device](../../features/basic/device.html)
:::

::: page-nav
[ ← [页面启动模式](../framework/other/launch-mode.html){.prev} ]{.prev}
[ [代码示例](samples.html) → ]{.next}
:::
:::

::: toc
::: on-this-page
快速导航
:::

::: {.vuepress-toc-item .vuepress-toc-h2 .active}
[自适应布局](specs.html#自适应布局 "自适应布局")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[自适应单位](specs.html#自适应单位 "自适应单位")
:::

::: {.vuepress-toc-item .vuepress-toc-h3}
[px](specs.html#px "px")
:::

::: {.vuepress-toc-item .vuepress-toc-h3}
[百分比%](specs.html#百分比 "百分比%")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[固定长度单位](specs.html#固定长度单位 "固定长度单位")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[媒体查询](specs.html#媒体查询 "媒体查询")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[获取屏幕信息](specs.html#获取屏幕信息 "获取屏幕信息")
:::
:::
:::

::: global-ui
:::
:::
