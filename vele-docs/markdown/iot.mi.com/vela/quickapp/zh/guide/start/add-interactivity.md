::: {#app server-rendered="true"}
::: theme-container
::: navbar
::: sidebar-button
![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGFyaWEtaGlkZGVuPSJ0cnVlIiByb2xlPSJpbWciIHZpZXdib3g9IjAgMCA0NDggNTEyIiBjbGFzcz0iaWNvbiI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNNDM2IDEyNEgxMmMtNi42MjcgMC0xMi01LjM3My0xMi0xMlY4MGMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6bTAgMTYwSDEyYy02LjYyNyAwLTEyLTUuMzczLTEyLTEydi0zMmMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6bTAgMTYwSDEyYy02LjYyNyAwLTEyLTUuMzczLTEyLTEydi0zMmMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDQyNGM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjMyYzAgNi42MjctNS4zNzMgMTItMTIgMTJ6Ij48L3BhdGg+PC9zdmc+){.icon}
:::

[![Xiaomi Vela JS 应用](../../../logo.png){.logo} [Xiaomi Vela JS
应用]{.site-name
.can-hide}](https://iot.mi.com/vela/quickapp/){.home-link
.router-link-active}

::: links
::: search-box
:::

::: nav-item
[教程](../version/APILevel4.html){.nav-link .router-link-active}
:::

::: nav-item
[组件](../../components/index.html){.nav-link}
:::

::: nav-item
[JS接口](../../features/index.html){.nav-link}
:::

::: nav-item
[编程示例](../../samples/index.html){.nav-link}
:::

::: nav-item
[工具](../../tools/index.html){.nav-link}
:::

::: nav-item
::: dropdown-wrapper
[选择语言]{.title} []{.arrow .down}

[选择语言]{.title} []{.arrow .right}

-   [简体中文](add-interactivity.html){.nav-link
    .router-link-exact-active .router-link-active aria-current="page"}
-   [English](https://iot.mi.com/vela/quickapp/en/guide/start/add-interactivity.html){.nav-link}
:::
:::
:::
:::

::: sidebar-mask
:::

::: nav-item
[教程](../version/APILevel4.html){.nav-link .router-link-active}
:::

::: nav-item
[组件](../../components/index.html){.nav-link}
:::

::: nav-item
[JS接口](../../features/index.html){.nav-link}
:::

::: nav-item
[编程示例](../../samples/index.html){.nav-link}
:::

::: nav-item
[工具](../../tools/index.html){.nav-link}
:::

::: nav-item
::: dropdown-wrapper
[选择语言]{.title} []{.arrow .down}

[选择语言]{.title} []{.arrow .right}

-   [简体中文](add-interactivity.html){.nav-link
    .router-link-exact-active .router-link-active aria-current="page"}
-   [English](https://iot.mi.com/vela/quickapp/en/guide/start/add-interactivity.html){.nav-link}
:::
:::

-   ::: {.section .sidebar-group .depth-0}
    [快速入门](https://iot.mi.com/vela/quickapp/zh/guide/start){.sidebar-heading
    .clickable .router-link-active .open}
    -   [安装环境](use-ide.html){.sidebar-link}
    -   [项目结构](project-overview.html){.sidebar-link}
    -   [编写页面UI](user-interface.html){.sidebar-link}
    -   [添加交互](add-interactivity.html){.active .sidebar-link
        aria-current="page"}
    -   [数据获取](data-fetch.html){.sidebar-link}
    -   [编译参数](toolkit-params.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [基础功能](../framework/index.html){.sidebar-heading .clickable}
    -   [项目结构](../framework/project-structure.html){.sidebar-link}

    -   [项目配置](../framework/manifest.html){.sidebar-link}

    -   [UX 文件](../framework/ux.html){.sidebar-link}

    -   ::: {.section .sidebar-group .collapsable .is-sub-group .depth-1}
        [模板语法 []{.arrow
        .right}](../framework/template/index.html){.sidebar-heading
        .clickable}
        :::

    -   ::: {.section .sidebar-group .collapsable .is-sub-group .depth-1}
        [样式语法 []{.arrow
        .right}](../framework/style/index.html){.sidebar-heading
        .clickable}
        :::

    -   ::: {.section .sidebar-group .collapsable .is-sub-group .depth-1}
        [脚本语法 []{.arrow
        .right}](../framework/script/index.html){.sidebar-heading
        .clickable}
        :::

    -   [页面切换](../framework/page-switch.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [进阶功能](../framework/other/index.html){.sidebar-heading
    .clickable}
    -   [多语言覆盖](../framework/other/i18n.html){.sidebar-link}

    -   [后台运行](../framework/other/background-running.html){.sidebar-link}

    -   [hap 链接](../framework/other/hap-schema.html){.sidebar-link}

    -   [页面启动模式](../framework/other/launch-mode.html){.sidebar-link}

    -   ::: {.section .sidebar-group .is-sub-group .depth-1}
        [多屏适配](../multi-screens/index.html){.sidebar-heading
        .clickable}
        -   [适配规范](../multi-screens/specs.html){.sidebar-link}
        -   [代码示例](../multi-screens/samples.html){.sidebar-link}
        -   [条件编译](../multi-screens/conditional-compilation.html){.sidebar-link}
        :::
    :::

-   ::: {.section .sidebar-group .depth-0}
    [开发者物料](../developer-materials/index.html){.sidebar-heading
    .clickable}
    -   [拓展组件](../developer-materials/extension-components.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [设计指南](../design/index.html){.sidebar-heading .clickable}
    -   [多屏设计](../design/multi-screens.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [最佳实践](../best-practice/index.html){.sidebar-heading .clickable}
    -   [内存优化](../best-practice/memory.html){.sidebar-link}
    -   [常用业务优化](../best-practice/business.html){.sidebar-link}
    -   [启动时延优化](../best-practice/start.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [发布](../publish/index.html){.sidebar-heading .clickable}
    -   [验收标准](../publish/acceptance-criteria.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    [版本说明](../version/index.html){.sidebar-heading .clickable}
    -   [APILevel2](https://iot.mi.com/vela/quickapp/zh/guide/version/APILevel2.html){.sidebar-link}
    -   [APILevel3](https://iot.mi.com/vela/quickapp/zh/guide/version/APILevel3.html){.sidebar-link}
    -   [APILevel4](https://iot.mi.com/vela/quickapp/zh/guide/version/APILevel4.html){.sidebar-link}
    :::

-   ::: {.section .sidebar-group .depth-0}
    其他

    -   [常见问题](../other/faq.html){.sidebar-link}
    -   [注意事项](../other/tips.html){.sidebar-link}
    :::

::: {.page role="main"}
::: {.theme-default-content .content__default}
# [\#](add-interactivity.html#添加交互){.header-anchor} 添加交互

在上一章节中，我们已经编写了两个页面的结构和样式，但是两个页面之间没有任何关联，
在本章中，我们会实现页面间的跳转。

## [\#](add-interactivity.html#注册事件){.header-anchor} 注册事件

页面跳转由用户触发，需要给页面的特定元素添加对应的事件，比如`click`/`touchstart`。
有关事件更多的细节，请参考[通用事件](../../components/general/events.html)。

在这个天气预报App中，我们采用的交互是滑动切换页面：

1.  在实时天气页面中，向上滑动进入未来3天天气页面；
2.  在未来3天天气页面，向右滑动返回到实时天气页面。

我们希望在页面任何地方滑动都执行跳转动作，所以将滑动事件(`swipe`)注册到根节点上。

模板代码如下：

::: {.language-html .extra-class}
``` language-html
<template>
  <div class="page column" @swipe="toListPage">
    <!-- 页面其它内容 -->
  </div>
</template>
```
:::

::: {.custom-block .tip}
说明

`@swipe="toListPage"`也可以写成`onswipe="toListPage"`，详情请参考[事件绑定](../framework/template/event.html)。
:::

## [\#](add-interactivity.html#页面跳转){.header-anchor} 页面跳转

注册完事件后，需要在JavaScript代码中，定义`toListPage()`回调方法，通过判断滑动方向，决定是否做页面跳转。
页面跳转，需要使用到`@system.router`模块，使用前请先在`manifest.json`中声明：

::: {.language-js .extra-class}
``` language-js
{
  // ...
  "features": [
    { "name": "system.router" }
  ]
}
```
:::

::: {.custom-block .tip}
说明

更多router相关细节，请参考[页面切换](../framework/page-switch.html)。
:::

声明模块后，即可在JavaScript脚本中引入模块，然后使用`router`提供的API在页面间跳转：

::: {.language-html .extra-class}
``` language-html
<script>
  import router from '@system.router'

  export default {
    // ...
    toListPage(eve) {
      if (eve.direction === 'up') {
        router.push({
          uri: '/pages/list'
        })
      }
    }
  }
</script>
```
:::

同样，在未来3天天气页面中，使用相同的方式来实现页面返回逻辑。对应的代码为：

::: {.language-html .extra-class}
``` language-html
<template>
  <div class="page column" @swipe="toHomePage">
    <!-- 页面其它内容 -->
  </div>
</template>
```
:::

::: {.language-html .extra-class}
``` language-html
<script>
  import router from '@system.router'

  export default {
    // ...
    toHomePage(eve) {
      if (eve.direction === 'right') {
        router.back()
      }
    }
  }
</script>
```
:::
:::

::: page-nav
[ ← [编写页面UI](user-interface.html){.prev} ]{.prev} [
[数据获取](data-fetch.html) → ]{.next}
:::
:::

::: toc
::: on-this-page
快速导航
:::

::: {.vuepress-toc-item .vuepress-toc-h2 .active}
[注册事件](add-interactivity.html#注册事件 "注册事件")
:::

::: {.vuepress-toc-item .vuepress-toc-h2}
[页面跳转](add-interactivity.html#页面跳转 "页面跳转")
:::
:::
:::

::: global-ui
:::
:::
